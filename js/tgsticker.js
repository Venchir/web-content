var RLottie=function(){var e={},t=!1,r=!1,a=[],n=window.devicePixelRatio||1,i=+new Date;e.Api={},e.players=Object.create(null),e.WORKERS_LIMIT=4;var o=0,s=!1,u=!1,l=!1,d=!1,m=window.navigator.userAgent,f=!!window.safari||!(!m||!(/\b(iPad|iPhone|iPod)\b/.test(m)||m.match("Safari")&&!m.match("Chrome"))),c=f;function h(){var t,r,a=+Date.now(),n=!d||a-d>1e3;for(t in e.players)(r=e.players[t])&&r.frameCount&&a-r.frameThen>r.frameInterval&&g(r,n)&&a;c?s=requestAnimationFrame(h):u=setTimeout(h,16),l=!0,n&&(d=a)}function p(){var t,r=!0,a=!1;for(key in e.players)if((t=e.players[key])&&t.frameCount){t.forceRender&&(a=!0),r=!1;break}(l===r||a)&&(s&&cancelAnimationFrame(s),u&&clearTimeout(u),l=!1,r||(c?s=requestAnimationFrame(h):u=setTimeout(h,0),l=!0))}function y(n){r?n&&n():(n&&a.push(n),t||(console.log("["+(+new Date-i)/1e3+"] ","tgsticker init"),t=!0,QueryableWorkerProxy.init("/js/tgsticker-worker.js?14",e.WORKERS_LIMIT,(function(){r=!0;for(var e=0;e<a.length;e++)a[e]();a=[]}))))}function g(e,t){if(!e.canvas||0==e.canvas.width||0==e.canvas.height)return!1;if(!e.forceRender){if(!(window.isFocused?isFocused():document.hasFocus())||e.paused||!e.isVisible||!e.frameCount)return!1;var r=e.isInViewport;if(void 0===r||t){var a=e.el.getBoundingClientRect();r=!(a.bottom<0||a.right<0||a.top>(window.innerHeight||document.documentElement.clientHeight)||a.left>(window.innerWidth||document.documentElement.clientWidth)),e.isInViewport=r}if(!r)return!1}var n=e.frameQueue.shift();if(null!==n){!function(e,t){e.forceRender=!1,e.imageData.data.set(t.frame),e.context.putImageData(e.imageData,0,0),e.frameNo=t.no;var r=+new Date;e.frameThen&&e.times.push(r-e.frameThen);e.frameThen=r-r%e.frameInterval,e.thumb&&(e.el.removeChild(e.thumb),delete e.thumb)}(e,n);var i=e.nextFrameNo;e.stopOnLastFrame&&n.no==e.frameCount-1&&(e.stopOnLastFrame=!1,e.paused||(e.paused=!0,triggerEvent(e.el,"tg:pause"))),e.stopOnFirstFrame&&0==n.no&&(e.waitForFirstFrame?e.waitForFirstFrame=!1:(e.stopOnFirstFrame=!1,e.paused||(e.paused=!0,triggerEvent(e.el,"tg:pause")))),!1!==i&&(e.nextFrameNo=!1,v(e.reqId,i))}return!0}function v(t,r){var a=e.players[t],n=a.frames[r];n?w(t,r,n):a.workerProxy.renderFrame(r,!f)}function w(t,r,a){var n=e.players[t];if(n&&n.frames){n.frames[r]||r&&!(n.options.cachingModulo&&(t+r)%n.options.cachingModulo)||(n.frames[r]=new Uint8ClampedArray(a));var i=r>0?r-1:n.frameCount-1,o=n.frameQueue.last();if(!o||o.no==i){n.frameQueue.push({no:r,frame:a});var s=++r;s>=n.frameCount&&(s=0,n.times.length&&(n.times=[])),n.frameQueue.needsMore()?v(t,s):n.nextFrameNo=s}}}function F(t,r,a){var n=e.players[t];n.canvas=document.createElement("canvas"),n.canvas.width=n.width,n.canvas.height=n.height,n.el.appendChild(n.canvas),n.context=n.canvas.getContext("2d"),n.fps=a,n.frameInterval=1e3/n.fps,n.frameThen=Date.now(),n.frameCount=r,n.forceRender=!0,n.frameQueue=new FrameQueue(a/4),p(),v(t,0),triggerEvent(n.el,"tg:load"),r>0&&(n.needPlayOnce?(delete n.needPlayOnce,delete n.needPlayUntilEnd,n.paused=!1,n.stopOnFirstFrame=!0,n.stopOnLastFrame=!1,(!1===n.frameNo||n.frameNo>0)&&(n.waitForFirstFrame=!0)):n.needPlayUntilEnd&&(delete n.needPlayOnce,delete n.needPlayUntilEnd,n.paused=!1,n.stopOnFirstFrame=!1,n.stopOnLastFrame=!0)),n.paused||triggerEvent(n.el,"tg:play")}return e.isSafari=f,e.isSupported=function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1}()&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Worker&&"undefined"!=typeof ImageData,e.init=function(t,r){if(!e.isSupported)return!1;y((function(){t&&function(t,r){if(!t.rlPlayer)if("picture"==t.tagName.toLowerCase()){r=r||{};var a=t.rlPlayer={};a.thumb=t.querySelector("img");for(var i=t.querySelectorAll('source[type="application/x-tgsticker"]'),s=t.hasAttribute("data-multi-source"),u=[],l={},d=0;d<i.length;d++){var m=i[d],f=m&&m.getAttribute("srcset")||"",c=m&&m.getAttribute("data-frames-align")||"";if(f&&!l[f]&&(l[f]=!0,u.push({url:f,framesAlign:c}),!s))break}if(u.length){var h=t.clientWidth||t.getAttribute("width"),p=t.clientHeight||t.getAttribute("height"),y=r.maxDeviceRatio?Math.min(r.maxDeviceRatio,n):n;h&&p||(h=p=256),a.reqId=++o,e.players[o]=a,a.el=t,a.frameNo=!1,a.nextFrameNo=!1,a.frames={},a.width=Math.trunc(h*y),a.height=Math.trunc(p*y),a.workerProxy=QueryableWorkerProxy.create(a.reqId,w,F),a.options=r,a.isVisible=!0,a.paused=!!r.noAutoPlay,a.needPlayOnce=!!r.playOnce,a.needPlayUntilEnd=!!r.playUntilEnd,a.repeatCount=!1,a.waitForFirstFrame=!1,a.stopOnFirstFrame=!1,a.stopOnLastFrame=!1,a.forcePlayFrames=0,a.times=[],a.imageData=new ImageData(a.width,a.height),a.workerProxy.loadFromData(u,a.width,a.height),triggerEvent(a.el,"tg:init")}else console.warn("picture source application/x-tgsticker not found")}else console.warn("only picture tag allowed")}(t,r)}))},e.destroy=function(t){!function(t){if(t.rlPlayer){var r=t.rlPlayer;delete e.players[r.reqId],delete r,p()}}(t)},e.playOnce=function(e){if(e&&e.rlPlayer){var t=e.rlPlayer;t.frameCount>0?(t.stopOnFirstFrame=!0,t.stopOnLastFrame=!1,t.frameNo>0&&(t.waitForFirstFrame=!0),t.paused&&(t.paused=!1,triggerEvent(e,"tg:play"))):t.needPlayOnce=!0}},e.playUntilEnd=function(e){if(e&&e.rlPlayer){var t=e.rlPlayer;t.frameCount>0?(t.stopOnFirstFrame=!1,t.stopOnLastFrame=!0,t.paused&&(t.paused=!1,triggerEvent(e,"tg:play"))):t.needPlayUntilEnd=!0}},e.play=function(t,r){t&&t.rlPlayer&&(r&&e.reset(t),t.rlPlayer.paused=!1)},e.pause=function(e){e&&e.rlPlayer&&(e.rlPlayer.paused=!0)},e.reset=function(e){if(e&&e.rlPlayer){var t=e.rlPlayer;t.frameQueue.clear(),t.forceRender=!0,v(t.reqId,0),p()}},e.destroyWorkers=function(){QueryableWorkerProxy.destroy(),t=r=!1},e}(),QueryableWorkerProxy=function(){var e={},t=0,r=0,a={},n={},i=[],o=0,s=+new Date;function u(){return"["+(+new Date-s)/1e3+"] "}function l(e,r,a){return this.proxyId=++t,this.playerId=e,this.onFrame=r,this.onLoaded=a,this.items=[],this.itemsMap={},n[this.proxyId]=this,this}function d(e,t,r){var i=a[e],o=n[i],s=o.itemsMap[e],u=t;"right"==s.framesAlign&&(u=t+(o.frameCount-s.frameCount)),s.frameLoaded[u]=r;for(var l=!0,d=0;d<o.items.length;d++){if(!(m=(s=o.items[d]).frameLoaded[u])){l=!1;break}}if(l)if(1==o.items.length){var m=o.items[0].frameLoaded[u];o.onFrame(o.playerId,u,m),delete o.items[0].frameLoaded[u]}else{var f=[];for(d=0;d<o.items.length;d++){m=(s=o.items[d]).frameLoaded[u];o.imageData.data.set(m);var c=createImageBitmap(o.imageData);f.push(c),delete s.frameLoaded[u]}Promise.all(f).then((function(e){o.context.clearRect(0,0,o.canvas.width,o.canvas.height);for(var t=0;t<e.length;t++)o.context.drawImage(e[t],0,0);var r=o.context.getImageData(0,0,o.canvas.width,o.canvas.height);o.onFrame(o.playerId,u,r.data)}))}else delete frameDatas}function m(e,t,r){var i=a[e],o=n[i];(l=o.itemsMap[e]).loaded=!0,l.frameCount=t,l.fps=r;var s=!0;t=null,r=null;for(var u=0;u<o.items.length;u++){var l;if((l=o.items[u]).framesAlign||(null===t?t=l.frameCount:!1!==t&&t!==l.frameCount&&(t=!1)),null===r?r=l.fps:!1!==r&&r!==l.fps&&(r=!1),!l.loaded){s=!1;break}}if(s){if(null===t)return void console.warn("Frame count not defined");if(!1===t)return void console.warn("Frame count is different");if(null===r)return void console.warn("FPS not defined");if(!1===r)return void console.warn("FPS is different");o.frameCount=t,o.fps=r,o.onLoaded(o.playerId,t,r)}}return l.prototype.loadFromData=function(e,t,n){if(this.items.length>0)console.warn("already loaded");else{this.clampedSize=t*n*4;for(var s=0;s<e.length;s++){var u=e[s],l=++r,d=i[o++];o>=i.length&&(o=0),d.sendQuery("loadFromData",l,u.url,t,n);var m={reqId:l,worker:d,url:u.url,loaded:!1,clamped:new Uint8ClampedArray(this.clampedSize),frameLoaded:{}};u.framesAlign&&(m.framesAlign=u.framesAlign),this.items.push(m),this.itemsMap[l]=m,a[l]=this.proxyId}this.items.length>1&&(this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=n,this.context=this.canvas.getContext("2d"),this.imageData=new ImageData(t,n))}},l.prototype.renderFrame=function(e,t){for(var r=0;r<this.items.length;r++){var a=this.items[r],n=e;"right"==a.framesAlign&&(n=e-(this.frameCount-a.frameCount)),t?(a.clamped.length||(a.clamped=new Uint8ClampedArray(this.clampedSize)),a.worker.sendQuery("renderFrame",a.reqId,n,a.clamped)):a.worker.sendQuery("renderFrame",a.reqId,n)}},e.init=function(e,t,r){var a=t,n=i[0]=new QueryableWorker(e);n.addListener("ready",(function(){if(console.log(u(),"worker #0 ready"),n.addListener("frame",d),n.addListener("loaded",m),--a)for(var o=1;o<t;o++)!function(t){var n=i[t]=new QueryableWorker(e);n.addListener("ready",(function(){console.log(u(),"worker #"+t+" ready"),n.addListener("frame",d),n.addListener("loaded",m),--a||(console.log(u(),"workers ready"),r&&r())}))}(o);else console.log(u(),"workers ready"),r&&r()}))},e.create=function(e,t,r){return new l(e,t,r)},e.destroy=function(){for(var e=0;e<i.length;e++)i[e].terminate(),console.log("worker #"+e+" terminated");console.log("workers destroyed"),i=[]},e}();function QueryableWorker(e,t,r){var a=this,n=new Worker(e),i={};this.defaultListener=t||function(){},r&&(n.onerror=r),this.postMessage=function(e){n.postMessage(e)},this.terminate=function(){n.terminate()},this.addListener=function(e,t){i[e]=t},this.removeListener=function(e){delete i[e]},this.sendQuery=function(e){if(arguments.length<1)throw new TypeError("QueryableWorker.sendQuery takes at least one argument");e=arguments[0];var t=Array.prototype.slice.call(arguments,1);if(RLottie.isSafari)n.postMessage({queryMethod:e,queryMethodArguments:t});else{for(var r=[],a=0;a<t.length;a++)t[a]instanceof ArrayBuffer&&r.push(t[a]),t[a].buffer&&t[a].buffer instanceof ArrayBuffer&&r.push(t[a].buffer);n.postMessage({queryMethod:e,queryMethodArguments:t},r)}},n.onmessage=function(e){e.data instanceof Object&&e.data.hasOwnProperty("queryMethodListener")&&e.data.hasOwnProperty("queryMethodArguments")?i[e.data.queryMethodListener].apply(a,e.data.queryMethodArguments):this.defaultListener.call(a,e.data)}}function FrameQueue(e){this.queue=[],this.maxLength=e}function triggerEvent(e,t,r){var a=new CustomEvent(t,r);e.dispatchEvent(a)}FrameQueue.prototype.needsMore=function(){return this.queue.length<this.maxLength},FrameQueue.prototype.empty=function(){return!this.queue.length},FrameQueue.prototype.notEmpty=function(){return this.queue.length>0},FrameQueue.prototype.push=function(e){return this.queue.push(e)},FrameQueue.prototype.shift=function(){return this.queue.length?this.queue.shift():null},FrameQueue.prototype.last=function(e){return this.queue.length?this.queue[this.queue.length-1]:null},FrameQueue.prototype.clear=function(){return this.queue=[],!0},this.CustomEvent&&"object"!=typeof this.CustomEvent||function(){this.CustomEvent=function(e,t){var r;t=t||{bubbles:!1,cancelable:!1,detail:void 0};try{(r=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail)}catch(a){(r=document.createEvent("Event")).initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail}return r}}();